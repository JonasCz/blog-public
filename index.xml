<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Jonas's blog</title><link>https://jonas.bike/</link><description>Recent content on Jonas's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 19 Aug 2021 11:52:10 +0100</lastBuildDate><atom:link href="https://jonas.bike/index.xml" rel="self" type="application/rss+xml"/><item><title>Testing solar ebike charging on the road (how many more KMs can I get?)</title><link>https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/</link><pubDate>Thu, 19 Aug 2021 11:52:10 +0100</pubDate><guid>https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/</guid><description>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038.jpg" alt="Featured image of post Testing solar ebike charging on the road (how many more KMs can I get?)" />&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>I&amp;rsquo;ve built a solar charged ebike setup, with the aim of being able to go further, faster, and with less effort. This is a short write-up of what went into it. Questions? Send an email to the adress listed at left or in the menu.&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_214454.jpg"
width="3972"
height="2736"
srcset="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_214454_hucaf183842553bb7c6a1a194af407bbe3_2485585_480x0_resize_q75_box.jpg 480w, https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_214454_hucaf183842553bb7c6a1a194af407bbe3_2485585_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Trailer with soler panels in the riding configuration. And me, happy that I made it to the beach!"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;p>Unfortunateley I don&amp;rsquo;t have photos of everything, nor the build process :-(&lt;/p>
&lt;h2 id="build">Build&lt;/h2>
&lt;p>Components for the solar trailer:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>A heavy steel-framed, single wheel bike trailer (8.5kg for just the unmodified trailer), with a DIY frame to hold up the solar panels, made of aluminum square tubes, held together by 3D-printed spacer blocks, then a bolt (with a big washer) through the spacer block and the square tube(s) to clamp it together.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>4 100w flexible solar panels; two exposed while riding, with two more tucked underneath and deployable when stopped. 1.2kg each according to the manufacturer.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>1 solar charge controller, from China, which can be found by searching for &lt;em>CTK-EV300&lt;/em>. This is a &amp;ldquo;boosting&amp;rdquo; model, meaining it takes the lower voltage produced by the solar panels (~30v), and &amp;ldquo;boosts&amp;rdquo; it up to the ~50v required for charging the battery pack. It works quite well, although not optimal for rapidly passing / varying shade.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>And the bike I already had was a self-built eBike conversion with:&lt;/p>
&lt;ul>
&lt;li>TSDZ2 motor. more about that below, too.&lt;/li>
&lt;li>Slightly tired 1000wh battery (48v)&lt;/li>
&lt;li>Built on a Rockrider 540 bike (mid-range hardtail MTB). Front and rear racks additionally bodged on, custom battery box, nice saddle and and handlebars added, etc.&lt;/li>
&lt;/ul>
&lt;p>It took quite a while to build this, the most time consuming part being the frame for the solar panels, since it took a lot of trial and error to get all the 3D printed connectors right and angled correctly.&lt;/p>
&lt;p>I also designed a custom connector for the trailer to attach to the bike, since I didn&amp;rsquo;t quite trust the fragile looking extended quick-release skewer the trailer came with. The custom connector design was a pair of &amp;ldquo;split&amp;rdquo; 3D printed blocks with space inside, modelled to fit precisely around the seatstays of the bike, those blocks then being clamped in place from either side with steel plates, and then the trailer hooking onto the steel plates (sorry, no photos for now..). So far no issues with this.&lt;/p>
&lt;h2 id="test-trip">Test trip&lt;/h2>
&lt;p>I did a 5 day trip to test this setup, in south-west france. Two days out, one rest day (aka lie-on-the-beach-and-do-nothing day), then two days back on the same route. I deliberately picked a week with near uninterrupted sunshine (this is important!), and a route that is nearly completely flat. The approximate route, resulting in aprroximately 160km per day:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/screenshot.jpg"
width="2714"
height="1474"
srcset="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/screenshot_hue4bf7c4ea1b7169024982850562bde23_1158021_480x0_resize_q75_box.jpg 480w, https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/screenshot_hue4bf7c4ea1b7169024982850562bde23_1158021_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Route plan"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="441px"
>&lt;/p>
&lt;p>Exclusively done using solar power, and only wild camping.&lt;/p>
&lt;p>During the test trip, everything actually worked, and nothing broke! It gave me a significant daily range boost (making 160km feel like I&amp;rsquo;ve only pedalled 60). With a bonus of not having to worry about phone or lights charging (provided from the main power system), and way more capacity for stuff in the trailer.&lt;/p>
&lt;h2 id="limitations">Limitations&lt;/h2>
&lt;p>With the benefits, there&amp;rsquo;s also some drawbacks:&lt;/p>
&lt;h3 id="weather-dependency">Weather dependency&lt;/h3>
&lt;p>You think you&amp;rsquo;re dependent on the weather with a &amp;ldquo;normal&amp;rdquo; bike touring set up? Well, you&amp;rsquo;re even more dependent on the weather with this. For me it resulted in constantly looking at the weather forecast and the battery remaining percentage.&lt;/p>
&lt;p>&lt;strong>First&lt;/strong>, even on perfect weather days, I needed to plan my riding around the sunshine hours, since the solar energy collected during riding is very low. This is due to the fact that even partial shade (from myself, surrounding trees, imperfect panel angle&amp;hellip;) reduces the output of the panels significantly, and in addition, after brief partial shading of the panel, the charge controller takes a while to &amp;ldquo;recover&amp;rdquo; before it produces full charging power again. A more expensive controller (such as Genasun) may be better in this regard, but the limitation of shading is still there.&lt;/p>
&lt;p>Additionally, while riding I only have 200w of solar panels exposed, whereas when stopped, I can unfold 200w more, thus having an even stronger incentive to stop and charge:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038.jpg"
width="4000"
height="3000"
srcset="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038_hu850231dcb3acf2e7f116a06368871962_5943220_480x0_resize_q75_box.jpg 480w, https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038_hu850231dcb3acf2e7f116a06368871962_5943220_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="400w of solar charging when stopped"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;strong>Second&lt;/strong>, the need for sunshine means that on cloudy days, there&amp;rsquo;s no power. This thing was heavy and quite a slog to pedal without electric assist.&lt;/p>
&lt;h3 id="power-budgeting-is-essential">Power budgeting is essential&lt;/h3>
&lt;p>To make the most of this, a bit of effort is required to &amp;ldquo;budget&amp;rdquo; and plan for required power consumption in advance. Some stats I figured out about my setup:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Energy use for travel is about 10wh/km, with the trailer and bike fully loaded (the opensource firmware of the TSDZ2 motor can tell me this). With this information, I know that I theoretically have about 100km of no-sun range, which is approximately what I see in reality, too.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Given that energy collection while moving is very low, I know that I will have to stop after approximatly 100km. This resulted in the optimal day for me being:&lt;/p>
&lt;ul>
&lt;li>Start the day (7am) with a 50% full battery, and cycle for about 30kms before breakfast (I&amp;rsquo;d try to have some &amp;ldquo;safety margin&amp;rdquo; power always available).&lt;/li>
&lt;li>Stop to charge (8:30am), while having breakfast and then wait for two hours (unlimited phone charging is great&amp;hellip;). Given that my solar panels are 400w in total, they will give approx 300w in reality (this is normal with solar), this will almost charge my 1000wh battery in about 3h.&lt;/li>
&lt;li>Keep going for a bit (11:30am), adding about 70kms&lt;/li>
&lt;li>Stop for lunch (3pm), and more charging.&lt;/li>
&lt;li>Keep going in the evening&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>A second battery to bring the total capacity up to 2000wh would add more flexibility, and also allow to benefit more from overnight mains charging at campsites or similar.&lt;/p>
&lt;p>Also required is looking at the weather forecast, in particular the daily sunshine hours and times, and planning during the days before.&lt;/p>
&lt;p>I think 400w of solar and 1000wh battery is about the minimum for a solar set-up. For a very approximate idea of how far you can go with your set-up, &lt;a class="link" href="https://endless-sphere.com/forums/viewtopic.php?f=6&amp;amp;t=94721&amp;amp;p=1406135#p1408723" target="_blank" rel="noopener"
>there&amp;rsquo;s a helpful calculator spreadsheet here&lt;/a>.&lt;/p>
&lt;h3 id="day-to-day-limitations">Day to day limitations&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>It&amp;rsquo;s bigger and more cumbersome: meaning that some trails that I would have taken with just the bike now become unavailable. Not just rougher trails, but narrow gates (sheep barriers..), steps, even barriers on cycle paths become annoying.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>No trains with this: on a subsequent trip, there was an offer of all regional train tickets for 1€ in France, so I hopped on and did something completely different than what I&amp;rsquo;d planned. Not possible with this.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="stuff-that-can-go-wrong">Stuff that can go wrong&lt;/h3>
&lt;p>The motor I&amp;rsquo;m using is known for not being particularly reliable, so I ended up taking a whole bag of parts, including a conventional crankset and installation tools to put on the bike in case the motor would fail in a way that left me without being able to pedal &lt;strong>or&lt;/strong> use the electric assist, which is actually a possible failure mode of the TSDZ2. But I didn&amp;rsquo;t need to use it.&lt;/p>
&lt;p>If I were to put further work into something similar, I&amp;rsquo;d probably want to have a more reliable set-up:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>More reliable motor; i.e. Bafang. I&amp;rsquo;ve already had several failures with the TSDZ2 that required disassembly (heavy tools needed), and ordering parts from China (two week wait). It also overheats quite fast on warm days; even when capped at 250w max power it gets too hot. The maximum continuous power it is able to do on a 35c day seems to be about 200w. But to make up for it, it feels really nice to ride, and there is &lt;a class="link" href="https://github.com/OpenSourceEBike/TSDZ2_wiki/wiki" target="_blank" rel="noopener"
>awesome custom firmware&lt;/a> that adds lots of nice features not available on anything else.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Dual motor, or dual-everything setup. It could be possible to add a hub motor to the trailer (a small e-scooter type wheel), plus two (smaller capacity) batteries, and two solar charge controllers. Both drive systems would operate simultaneously (batteries and chargers in paralell, motors maybe too?) With this, all electrical failure modes are covered, and it would be possible to switch over to the functioning drive system with only a minor reduction in performance in case of failure on one.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Secondly, there&amp;rsquo;s just more mechanical stuff to go wrong: trailer, trailer frame, one more wheel for punctures, more load and stress on the bike..&lt;/p>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>For now I&amp;rsquo;m travelling on a conventional bike&amp;hellip;&lt;/p>
&lt;h3 id="future-improvements-or-changes">Future improvements or changes&lt;/h3>
&lt;ul>
&lt;li>More reliable motor set-up, as described above&lt;/li>
&lt;li>On board laptop charging: from China there is a DC to USB-C charger unit, which would allow me to power my laptop from the on board power. 13&amp;quot; MacBook Pro uses about 10w (which would give about 100 hours of runtime off my battery) during web browsing or coding, thus making it possible to have a truly off-grid remote, anywhere work setup.&lt;/li>
&lt;li>Less heavy set-up:, this could come in the form of a conventional ebike without trailer, and instead packing the solar panels on the bike. There are off-the-shelf foldable panels up to 300w, which I think would be just about the minimum. This would give access to trains, rougher trails, and narrow spaces.&lt;/li>
&lt;li>Or a more heavy set-up, with a trike and a &amp;ldquo;solar roof&amp;rdquo; design. The advantage of this is more space to carry stuff, and the ability to just stop and charge without having to unpack solar panels.&lt;/li>
&lt;/ul>
&lt;p>To be continued..&lt;/p></description></item><item><title>Better Cycling Infrastructure Overview in OsmAnd Using GeoVelo Overlay</title><link>https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/</link><pubDate>Thu, 28 Nov 2019 12:59:10 +0100</pubDate><guid>https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/</guid><description>&lt;img src="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot.jpg" alt="Featured image of post Better Cycling Infrastructure Overview in OsmAnd Using GeoVelo Overlay" />&lt;p>I’ve recently come across GeoVelo, which offers a map which clearly shows cycling infrastructure even when zoomed out to a country-level overview, which is a great way to have an overview for trip planning, which is’t possible with the offline OsmAnd maps, since cycleways are only shown when zoomed in far enough in OsmAnd. Even with a custom rendering.xml it’s still not possible to get an overview of cycle infrastructure on a country or region level, due to the way the cycleway information is baked into the offline map files. (Side note: GeoVelo also offers their own app - no offline functionality however)&lt;/p>
&lt;p>But - the GeoVelo tiles can be used as an overlay in OsmAnd, to offer an overview, even when zoomed out - it can even be combined with the above mentioned customized rendering.xml for close zoom levels, and the online GeoVelo maps when zoomed out (OsmAnd will cache the tiles for offline use).&lt;/p>
&lt;p>Anyway, here’s what it looks like:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot.jpg"
width="2160"
height="1080"
srcset="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot_hud8316c9fa22a5e46cca965adde5e7cd6_1285269_480x0_resize_q75_box.jpg 480w, https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot_hud8316c9fa22a5e46cca965adde5e7cd6_1285269_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="GeoVelo overly add dialog"
class="gallery-image"
data-flex-grow="200"
data-flex-basis="480px"
>&lt;/p>
&lt;p>And, how to set it up:&lt;/p>
&lt;p>In OsmAnd, go to “Configure map”, then “Map source…”, “Define/Edit…”, and enter the following details:&lt;/p>
&lt;ul>
&lt;li>Name: GeoVelo (or anything you want)&lt;/li>
&lt;li>URL: &lt;a class="link" href="https://tiles4.geovelo.fr/raster/facilities/%7b0%7d/%7b1%7d/%7b2%7d.png" target="_blank" rel="noopener"
>https://tiles4.geovelo.fr/raster/facilities/{0}/{1}/{2}.png&lt;/a>&lt;/li>
&lt;li>Maximum zoom: 16&lt;/li>
&lt;li>Minimum zoom: 2&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/geovelo-add.jpg"
width="1080"
height="1356"
srcset="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/geovelo-add_hu3b622d932adc2dfc859c155eaf1b09fa_178142_480x0_resize_q75_box.jpg 480w, https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/geovelo-add_hu3b622d932adc2dfc859c155eaf1b09fa_178142_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="GeoVelo overly add dialog"
class="gallery-image"
data-flex-grow="79"
data-flex-basis="191px"
>&lt;/p>
&lt;p>After that, just enable “Overlay map”, and set it to “GeoVelo”. You might also need to set “map source” back to “Offline vector maps” if OsmAnd changes to only the GeoVelo overlay.&lt;/p>
&lt;p>The map legend is available at GeoVelo, but, tl;dr: the dark green lines are dedicated cycleways, light green ones are shared, road cycle lanes.&lt;/p>
&lt;p>Have fun!&lt;/p></description></item><item><title>Setting up Strava Heatmap in OsmAnd</title><link>https://jonas.bike/setting-up-strava-heatmap-in-osmand/</link><pubDate>Thu, 28 Nov 2019 12:59:10 +0100</pubDate><guid>https://jonas.bike/setting-up-strava-heatmap-in-osmand/</guid><description>&lt;img src="https://jonas.bike/setting-up-strava-heatmap-in-osmand/screenshot.png" alt="Featured image of post Setting up Strava Heatmap in OsmAnd" />&lt;p>OsmAnd is a great app for hiking, mountain biking, or other outdoorsy things, however, one can make it even better by underlaying (or overlaying) data from Strava’s heatmap in addition to the offline Openstreetmap data. This is quite useful for spotting potential trails or routes that are not in Openstreetmap yet, or for identifying how “good” (poular…) a trail might be, based on how many Strava users take it. Here’s what it looks like:&lt;/p>
&lt;p>Strava heatmap as an underaly in Osmand&lt;/p>
&lt;p>How to set it up; the easy way:&lt;/p>
&lt;p>(This uses an online proxy to retrive the map tiles from Strava, so you don’t have to login, fiddle around with session tokens in the URL, etc. yourself) You can find more details about it here, including other maps available.&lt;/p>
&lt;p>In OsmAnd, go to “Configure map”, then “Map source…”, “Define/Edit…”, and enter the following details:&lt;/p>
&lt;pre>&lt;code>Name: Strava heatmap (or anything you want)
URL: https://anygis.ru/api/v1/Tracks_Strava_All_HD/{1}/{2}/{0}
Maximum zoom: 15
Minimum zoom: 0
&lt;/code>&lt;/pre>
&lt;p>That’s it. Just enable “underlay map”, and set it to “Strava heatmap”. If it doesn’t work for you, read on:&lt;/p>
&lt;p>And in case the easy way doesn’t work (you’ll need a Strava account and a desktop computer):&lt;/p>
&lt;p>Go to &lt;a class="link" href="https://www.strava.com/heatmap" target="_blank" rel="noopener"
>https://www.strava.com/heatmap&lt;/a>, login, and then open your browser’s developer tools (hit F12). You’ll need to go to the storage tab (in chrome, that’s under “Application” -&amp;gt; “Cookies”), and copy the values of CloudFront-Signature, CloudFront-Key-Pair-Id and CloudFront-Policy, to make up the following URL: (replace the dots with the values of those cookies…)&lt;/p>
&lt;p>&lt;a class="link" href="https://heatmap-external-a.strava.com/tiles-auth/all/gray/%7b0%7d/%7b1%7d/%7b2%7d.png?px=256&amp;amp;Signature=.......&amp;amp;Key-Pair-Id=.......&amp;amp;Policy=" target="_blank" rel="noopener"
>https://heatmap-external-a.strava.com/tiles-auth/all/gray/{0}/{1}/{2}.png?px=256&amp;Signature=.......&amp;Key-Pair-Id=.......&amp;Policy=&lt;/a>&amp;hellip;&amp;hellip;.&lt;/p>
&lt;p>Send this to your phone somehow once you’ve got it all.&lt;/p>
&lt;p>In OsmAnd, go to “Configure map”, then “Map source…”, “Define/Edit…”, and enter the following details:&lt;/p>
&lt;pre>&lt;code>Name: Strava heatmap (or anything you want)
URL: the url you got earlier.
Maximum zoom: 16
&lt;/code>&lt;/pre>
&lt;p>It should look something like this:&lt;/p>
&lt;p>Strava heatmap as an underaly in Osmand&lt;/p>
&lt;p>After that, just enable “underlay map”, and set it to “Strava heatmap”. You might also need to set “map source” back to “Offline vector maps” if OsmAnd changes to only the heatmap.&lt;/p>
&lt;p>If it stops working; Strava probably logged you out, you’ll need to do the whole URL assembly-copy-paste thing again - but you can do “select existing” in the OsmAnd “Define/edit” dialog to just update the URL.&lt;/p>
&lt;p>Have fun!&lt;/p></description></item></channel></rss>