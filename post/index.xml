<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Jonas's blog</title><link>https://jonas.bike/post/</link><description>Recent content in Posts on Jonas's blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 08 Aug 2024 12:59:10 +0100</lastBuildDate><atom:link href="https://jonas.bike/post/index.xml" rel="self" type="application/rss+xml"/><item><title>How to export saved places from Google Maps as GPX for OsmAnd</title><link>https://jonas.bike/how-to-export-saved-places-from-google-maps-as-gpx-for-osmand/</link><pubDate>Thu, 08 Aug 2024 12:59:10 +0100</pubDate><guid>https://jonas.bike/how-to-export-saved-places-from-google-maps-as-gpx-for-osmand/</guid><description>&lt;img src="https://jonas.bike/how-to-export-saved-places-from-google-maps-as-gpx-for-osmand/screenshot-google-maps-saved-places.jpg" alt="Featured image of post How to export saved places from Google Maps as GPX for OsmAnd" />&lt;p>For my next big bike trip, I&amp;rsquo;ve been collecting interesting places that I might want to visit, using Google Maps. Now, I&amp;rsquo;d like to import them into OsmAnd, my offline navigation app of choice. OsmAnd can import GPX files, however Google maps won&amp;rsquo;t let you export your saved places in a usable format such as GPX, which I&amp;rsquo;m guessing is because they&amp;rsquo;d rather you not leave Google Maps and take your data with you.&lt;/p>
&lt;p>There is however Google Takout, which does offer a CSV file with links to Google Maps and not much else. This needs to be converted to a GPX file with coordinates to be able to use it with another app such as OsmAnd.&lt;/p>
&lt;p>&lt;strong>How to:&lt;/strong>&lt;/p>
&lt;p>&lt;strong>1.&lt;/strong> Go to &lt;a class="link" href="https://takeout.google.com/" target="_blank" rel="noopener"
>Google Takeout&lt;/a>, then choose &amp;ldquo;deselect all&amp;rdquo; at the top of the list (to ensure you&amp;rsquo;re only getting your Maps data), then select &amp;ldquo;Saved&amp;rdquo; (Not any of the other &amp;ldquo;Maps&amp;rdquo; related items). Proceed with the Google Takeout export, at the end you&amp;rsquo;ll be emailed a zip file containing a &amp;ldquo;Saved&amp;rdquo; folder, with a csv file inside for each of your place lists.&lt;/p>
&lt;p>&lt;strong>2.&lt;/strong> Upload this csv file to &lt;a class="link" href="https://exportgooglemaps.com/" target="_blank" rel="noopener"
>https://exportgooglemaps.com/&lt;/a>. Disclaimer: This isn&amp;rsquo;t my service, and it doesn&amp;rsquo;t have a privacy policy that I can see, so it&amp;rsquo;s up to you weather you trust it with your places.&lt;/p>
&lt;p>Pick &amp;ldquo;JSON&amp;rdquo; when you download after it finishes.&lt;/p>
&lt;p>&lt;strong>3.&lt;/strong> Upload the resulting JSON file below, to convert it to a GPX file. You may use the &amp;ldquo;category&amp;rdquo; field to group the places together as one folder in OsmAnd, otherwise they will be in separate folders based on how Google Maps has categorized them. This one works on your device and doesn&amp;rsquo;t send data anywhere.&lt;/p>
&lt;div>
&lt;input type="file" id="fileInput" accept=".json" class="text-sm bg-gray-200 p-2 px-4 font-bold dark:bg-transparent dark:border dark:border-gray-100">
&lt;br>
&lt;br>
&lt;label for="typeInput">Category (optional):&lt;/label>
&lt;br>
&lt;input type="text" id="typeInput" placeholder="Add a category (folder) for all items">
&lt;br>
&lt;br>
&lt;button onclick="convertToJson()" class="text-sm bg-gray-200 p-2 px-4 font-bold dark:bg-transparent dark:border dark:border-gray-100">Convert to GPX&lt;/button>
&lt;br>
&lt;a id="downloadLink" style="display:none;">Download GPX&lt;/a>
&lt;script>
function convertToJson() {
const fileInput = document.getElementById('fileInput');
const customType = document.getElementById('typeInput').value || "Unknown";
const file = fileInput.files[0];
if (!file) {
alert("Please select a file first!");
return;
}
const reader = new FileReader();
reader.onload = function(event) {
const jsonData = JSON.parse(event.target.result);
const skippedItems = [];
const gpxData = jsonToGpx(jsonData, skippedItems, customType);
if (skippedItems.length > 0) {
alert("Skipped the following items due to missing GPS data:\n" + skippedItems.join('\n'));
}
const blob = new Blob([gpxData], { type: 'application/gpx+xml' });
const url = URL.createObjectURL(blob);
const downloadLink = document.getElementById('downloadLink');
downloadLink.href = url;
downloadLink.download = 'converted.gpx';
downloadLink.style.display = 'block';
downloadLink.textContent = 'Download GPX File';
};
reader.readAsText(file);
}
function jsonToGpx(jsonData, skippedItems, customType) {
let gpxContent = `&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;gpx version="1.1" creator="JSON to GPX Converter">
`;
jsonData.forEach(entry => {
if (!entry.gps || !entry.gps.lat || !entry.gps.lng) {
skippedItems.push(entry.name || "Unnamed item");
return;
}
const name = encodeXml(entry.name || "Unnamed");
const lat = entry.gps.lat;
const lon = entry.gps.lng;
const description = encodeXml(entry.description || "No description available.");
const type = encodeXml(customType);
gpxContent += `
&lt;wpt lat="${lat}" lon="${lon}">
&lt;name>${name}&lt;/name>
&lt;desc>${description}&lt;/desc>
&lt;type>${type}&lt;/type>
&lt;/wpt>`;
});
gpxContent += `
&lt;/gpx>`;
return gpxContent;
}
function encodeXml(text) {
return text.replace(/&amp;/g, "&amp;amp;")
.replace(/&lt;/g, "&amp;lt;")
.replace(/>/g, "&amp;gt;")
.replace(/"/g, "&amp;quot;")
.replace(/'/g, "&amp;apos;");
}
&lt;/script>
&lt;/div>
&lt;p>Once you have downloaded the resulting GPX file just above, go to &amp;ldquo;My Places&amp;rdquo; in OsmAnd and choose + (add), and pick the GPX file you downloaded above, and now your saved places should be available in OsmAnd:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/how-to-export-saved-places-from-google-maps-as-gpx-for-osmand/screenshot-osmand-saved-places.jpg"
width="1080"
height="968"
srcset="https://jonas.bike/how-to-export-saved-places-from-google-maps-as-gpx-for-osmand/screenshot-osmand-saved-places_hu17106645347161936525.jpg 480w, https://jonas.bike/how-to-export-saved-places-from-google-maps-as-gpx-for-osmand/screenshot-osmand-saved-places_hu4125118598275247448.jpg 1024w"
loading="lazy"
alt="Screenshot of saved places in OsmAnd"
class="gallery-image"
data-flex-grow="111"
data-flex-basis="267px"
>.&lt;/p>
&lt;p>I hope this helps you in your travels!&lt;/p></description></item><item><title>What's inside a direct-to-USB solar charger, how they work, and review of a new 15w ETFE one</title><link>https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/</link><pubDate>Sat, 10 Jun 2023 14:52:10 +0100</pubDate><guid>https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/</guid><description>&lt;img src="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/solar-panel-full.jpg" alt="Featured image of post What's inside a direct-to-USB solar charger, how they work, and review of a new 15w ETFE one" />&lt;h1 id="review-of-the-15w-etfe-usb-panel">Review of the 15w ETFE USB panel&lt;/h1>
&lt;p>I&amp;rsquo;ve recently bought a small solar panel for USB charging, primarily for bicycle touring. Since I have not seen any other reviews or information about this style of panel, or even a good general description of how they work, this is it.&lt;/p>
&lt;p>I bought this one because it seemed to be made of the newer ETFE material (which is supposedly more durable). It has a dimpled, textured surface just like other panels that you can find by looking for &amp;ldquo;ETFE&amp;rdquo;. It is branded &amp;ldquo;Folding&amp;rdquo;, although there are many brands and listings for it, as is typical with generic producs from China.&lt;/p>
&lt;p>It was much heavier than I expected, mine weighs 338 grams. (For comparison, various panels that are advertised at 10w, &lt;a class="link" href="https://threepointsofthecompass.com/2021/07/31/gear-chat-lightweight-solar-panels/" target="_blank" rel="noopener"
>such as the more common &amp;ldquo;Lixada&amp;rdquo;, are around 100 grams&lt;/a>). So don&amp;rsquo;t buy this if you care about weight. It measures approximately 360x215mm.&lt;/p>
&lt;p>The inner area where the cells are is quite stiff, and feels sturdy and durable. It seems like the cells are mounted onto a plastic backing plate, and then the the entire assembly is encased in the outer ETFE layer. Unfortunately this inner stiff backing does not extend around the hanging eyelets at the corners, which means that they seem quite flexible (and flimsy) compared to the rest of the panel. I am quite sure that these corner eyelets will tear if used to hang the panel in an outdoor environment or a backpack. It came with suction cups, which implies the intended purpose of the eyelets is to mount it to a window or vehicle windscreen. Here&amp;rsquo;s me pusing the corner of the panel to show how it flexes, while the panel itself does not:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/corner.jpg"
width="1918"
height="1400"
srcset="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/corner_hu9549950760169057167.jpg 480w, https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/corner_hu3414299512612458043.jpg 1024w"
loading="lazy"
alt="Corner of the solar panel"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="328px"
>&lt;/p>
&lt;p>In some quick testing, on a very sunny day in France, I was able to get around 6w, which suggests to me that in reality it is a 10w panel. It was advertised on AliExpress as being 15w.&lt;/p>
&lt;p>It is also advertised as IPX6, but it&amp;rsquo;s definitely not: the USB module does not have any kind of waterproofing, sealing, or conformal coating. It might be OK to use with gentle rain from above, with the USB part protected from the rain by the panel, but that&amp;rsquo;s about it.&lt;/p>
&lt;p>The USB module seems to be decently well glued on, however other similar panels are known for it falling off, so I would still exercise caution (those fragile eyelets will fit a USB cable through, and can thus provide strain relief). The ports are &amp;ldquo;right way up&amp;rdquo;, meaning the screen of a USB meter would face the back of the panel, meaning you cannot see what it shows.&lt;/p>
&lt;p>It can be opened by prying off the top plastic sheet, and removing 4 screws holding the top cover on. The top cover has a 3d-printed look, despite being injection molded. Perhaps a 3d printed part was used to make the initial mould:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/usb-box.jpg"
width="1920"
height="1440"
srcset="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/usb-box_hu5250838835665279406.jpg 480w, https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/usb-box_hu14794164819676648492.jpg 1024w"
loading="lazy"
alt="USB box, cover removal"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>Inside, the circuit board is very simple, with all all components on the top.:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/board-top.jpg"
width="1324"
height="1160"
srcset="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/board-top_hu16228709622969434347.jpg 480w, https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/board-top_hu11646733166200127940.jpg 1024w"
loading="lazy"
alt="USB PCB top side"
class="gallery-image"
data-flex-grow="114"
data-flex-basis="273px"
>&lt;/p>
&lt;ul>
&lt;li>An NS6326 switching regulator, 4-30v input, fixed 5v output, with it&amp;rsquo;s associated inductor, and input and output capacitors. It mostly matches the datasheet schemtic.&lt;/li>
&lt;li>An indicator LED + resistor, powered form the 5v output&lt;/li>
&lt;li>An unpopulated, unused DC output connector, providing the full voltage of the panel (through a diode which is unused, in this case). I the diode is populated likely despite being unneeded, since pick and place for a single version of the board which can also include the DC out connector, is cheaper than two versions, even with the &amp;ldquo;wasted&amp;rdquo; diode.&lt;/li>
&lt;li>Two USB ports. The data pins are shorted together. The USB ports feel OK, quality-wise, though not amazing.&lt;/li>
&lt;/ul>
&lt;p>The back side is completely devoid of components. There is a hole cut in the PCB to accommodate for each capacitor, even though there is enough vertical space in the case. This is perhaps another cost-cutting measure, since the PCB milling is essentially free during manufacture, and having a defined place for the capacitor to sit into can make hand-soldering quicker (and they do indeed look hand soldered):&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/board-bottom.jpg"
width="1716"
height="1455"
srcset="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/board-bottom_hu17590705184550622997.jpg 480w, https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/board-bottom_hu16574497241139649972.jpg 1024w"
loading="lazy"
alt="USB PCB bottom side"
class="gallery-image"
data-flex-grow="117"
data-flex-basis="283px"
>&lt;/p>
&lt;p>I will update this review once I&amp;rsquo;ve used this charger for some time, once I&amp;rsquo;ve seen how durable (or not) it is.&lt;/p>
&lt;h1 id="how-do-these-usb-solar-panels-work-anyway">How do these USB solar panels work, anyway?&lt;/h1>
&lt;p>Pretty much every small direct-to-USB solar panel uses the same basic formula:&lt;/p>
&lt;ul>
&lt;li>Solar panel with an open circuit voltage of around 6v.&lt;/li>
&lt;li>A buck converter providing 5v output to the USB ports.&lt;/li>
&lt;li>On fancier models, sometimes an additional IC or timer to periodically power-cycle the output, absent on this one.&lt;/li>
&lt;/ul>
&lt;p>So why the 6v panel, with 5v buck converter? Because solar panels inherently have a voltage-current curve: the more current you draw from a solar panel, the lower the voltage will become. Usually the curve looks something like this:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/Current-voltage-IV-curve.png"
width="1500"
height="1000"
srcset="https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/Current-voltage-IV-curve_hu7927128096791068213.png 480w, https://jonas.bike/whats-inside-a-direct-to-usb-solar-charger-how-they-work-and-review-of-a-new-15w-etfe-one/Current-voltage-IV-curve_hu4124686981695517878.png 1024w"
loading="lazy"
alt="Current-voltage curve"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>This is why MPPT (&amp;ldquo;maximum power point tracking&amp;rdquo;) battery chargers exist: they can regulate how much current they take from the panel, in order to not take too much current (thus making the voltage &amp;amp; power output collapse), or too little.&lt;/p>
&lt;p>With USB, we don&amp;rsquo;t have quite so much luxury: USB devices always expect 5v, however, this does happen to be pretty close to the maximum power point of a typical 6v-max panel, making it a good choice.&lt;/p>
&lt;p>The function of the buck regulator is to protect the device from the 6v (or more) the solar panel produces when not under load, for example when the device has finished charging. When the device is not charging, the buck regulator will be active, and will provide a regulated 5v on the output to ensure the device is happy.&lt;/p>
&lt;p>However, USB devices do do something that happens to make them able to charge from solar: they do indeed have a sort of MPPT algorithm built in. A device, when plugged into any USB charger, will slowly ramp up it&amp;rsquo;s charging current, until the input voltage drops too much (and crappy chargers, or long cables, do indeed drop the voltage when reaching the maximum current they can provide). The device that&amp;rsquo;s charging monitors this while ramping up it&amp;rsquo;s charging current, and once it&amp;rsquo;s found the maximum the charger will provide, it backs off by a little bit, and continues charging.&lt;/p>
&lt;p>The solar panel charger behaves in the same way: It&amp;rsquo;ll provide a steady 5v (thanks to the regulator) while the device ramps up it&amp;rsquo;s charging current, and once the maximum current that the panel can provide is reached, the voltage will begin to drop below 5v, (and the regulator will no longer be regulating and instead will be passing the input voltage though). The device notices the falling voltage, backs off a little bit on the charging current, and has hopefully found the optimal charging current.&lt;/p>
&lt;p>Often, this works quite well, however a few things are needed for it to work:&lt;/p>
&lt;ul>
&lt;li>A buck regulator which can pass the full input voltage thorough, when it falls below the 5v output regulated voltage. This is advertised in data sheets as &amp;ldquo;100% duty cycle&amp;rdquo;, and the NS6326 does indeed fulfill this. There is a slight efficiency loss, since the regulator&amp;rsquo;s inductor, and switching transistor will have some resistance, even when switched on 100% of the time and passing the input voltage straight through. I&amp;rsquo;d guess that our low-cost solar charger might have maybe 0.3 ohms of resistance added, leading to about 0,4w lost at full charging current. Poor quality, or long cables can loose another 0.4w, thus in the worst case of charging in full sun, with a long cable, we might be loosing almost 1w of power. However at lower currents the loss will be less.&lt;/li>
&lt;li>A USB device that has a good current-ramp-test-backoff-retry algorithm. Most devices will correctly find the maximum charging current when first plugged in, and then when a cloud is temporarily blocking sunlight, will back off the charging current. However, not all devices will then try to ramp up the charging current again once the sun is back, and instead stay at that lower charging current, either forever, or for a long time. Hence more expensive charger designs sometimes having an additional IC which periodically power-cycles the output, thus forcing the device to find the optimal charging current again. Power banks often do a better job at this than phones do, hence solar panel manufacturers frequently recommending to charge a power bank, and not your phone. A &amp;ldquo;USB power meter&amp;rdquo; can be very useful for troubleshooting, or even an app such as &lt;a class="link" href="https://play.google.com/store/apps/details?id=com.digibites.accubattery" target="_blank" rel="noopener"
>AccuBattery&lt;/a> which can tell you your phone&amp;rsquo;s charging current.&lt;/li>
&lt;li>A device that does not waste power when it (re)starts charging: some android phones turn on the display when initially connected to the charger, and on a cloudy day, or while moving in and out of shade, this could happen repeatedly.&lt;/li>
&lt;/ul>
&lt;p>Some improvements that could be made to this design of charger:&lt;/p>
&lt;ul>
&lt;li>Using a buck regulator which is set to output a little more than 5v, such as 5.25v which is allowed by the USB standard, and would possibly improve some device&amp;rsquo;s behaviour, as well as improving performance with long cables.&lt;/li>
&lt;li>Adding an output-power-cycling IC that some other chargers have&lt;/li>
&lt;li>A completely different design: instead of using a buck converter for limiting the output to 5v, it&amp;rsquo;s possible to use a zener diode, or zener diode + transistor to limit the voltage to 5v. This will be more efficient (no losses in the inductor or switching regulator), but a little more unsafe, since failure of the diode or transistor would expose the device to the full voltage of the panel.&lt;/li>
&lt;/ul>
&lt;p>Perhaps in a future post I&amp;rsquo;ll design an improved USB module for this style of charger.&lt;/p></description></item><item><title>Testing solar ebike charging on the road (how many more KMs can I get?)</title><link>https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/</link><pubDate>Thu, 19 Aug 2021 11:52:10 +0100</pubDate><guid>https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/</guid><description>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038.jpg" alt="Featured image of post Testing solar ebike charging on the road (how many more KMs can I get?)" />&lt;h2 id="overview">Overview&lt;/h2>
&lt;p>I&amp;rsquo;ve built a solar charged ebike setup, with the aim of being able to go further, faster, and with less effort. This is a short write-up of what went into it. Questions? Send an email to the adress listed at left or in the menu.&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_214454.jpg"
width="3972"
height="2736"
srcset="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_214454_hu9269444453351190808.jpg 480w, https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_214454_hu3736843961740878217.jpg 1024w"
loading="lazy"
alt="Trailer with soler panels in the riding configuration. And me, happy that I made it to the beach!"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;p>Unfortunateley I don&amp;rsquo;t have photos of everything, nor the build process :-(&lt;/p>
&lt;h2 id="build">Build&lt;/h2>
&lt;p>Components for the solar trailer:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>A heavy steel-framed, single wheel bike trailer (8.5kg for just the unmodified trailer), with a DIY frame to hold up the solar panels, made of aluminum square tubes, held together by 3D-printed spacer blocks, then a bolt (with a big washer) through the spacer block and the square tube(s) to clamp it together.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>4 100w flexible solar panels; two exposed while riding, with two more tucked underneath and deployable when stopped. 1.2kg each according to the manufacturer.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>1 solar charge controller, from China, which can be found by searching for &lt;em>CTK-EV300&lt;/em>. This is a &amp;ldquo;boosting&amp;rdquo; model, meaining it takes the lower voltage produced by the solar panels (~30v), and &amp;ldquo;boosts&amp;rdquo; it up to the ~50v required for charging the battery pack. It works quite well, although not optimal for rapidly passing / varying shade.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>And the bike I already had was a self-built eBike conversion with:&lt;/p>
&lt;ul>
&lt;li>TSDZ2 motor. more about that below, too.&lt;/li>
&lt;li>Slightly tired 1000wh battery (48v)&lt;/li>
&lt;li>Built on a Rockrider 540 bike (mid-range hardtail MTB). Front and rear racks additionally bodged on, custom battery box, nice saddle and and handlebars added, etc.&lt;/li>
&lt;/ul>
&lt;p>It took quite a while to build this, the most time consuming part being the frame for the solar panels, since it took a lot of trial and error to get all the 3D printed connectors right and angled correctly.&lt;/p>
&lt;p>I also designed a custom connector for the trailer to attach to the bike, since I didn&amp;rsquo;t quite trust the fragile looking extended quick-release skewer the trailer came with. The custom connector design was a pair of &amp;ldquo;split&amp;rdquo; 3D printed blocks with space inside, modelled to fit precisely around the seatstays of the bike, those blocks then being clamped in place from either side with steel plates, and then the trailer hooking onto the steel plates (sorry, no photos for now..). So far no issues with this.&lt;/p>
&lt;h2 id="test-trip">Test trip&lt;/h2>
&lt;p>I did a 5 day trip to test this setup, in south-west france. Two days out, one rest day (aka lie-on-the-beach-and-do-nothing day), then two days back on the same route. I deliberately picked a week with near uninterrupted sunshine (this is important!), and a route that is nearly completely flat. The approximate route, resulting in aprroximately 160km per day:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/screenshot.jpg"
width="2714"
height="1474"
srcset="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/screenshot_hu7950769074899489373.jpg 480w, https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/screenshot_hu15467637549408550975.jpg 1024w"
loading="lazy"
alt="Route plan"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="441px"
>&lt;/p>
&lt;p>Exclusively done using solar power, and only wild camping.&lt;/p>
&lt;p>During the test trip, everything actually worked, and nothing broke! It gave me a significant daily range boost (making 160km feel like I&amp;rsquo;ve only pedalled 60). With a bonus of not having to worry about phone or lights charging (provided from the main power system), and way more capacity for stuff in the trailer.&lt;/p>
&lt;h2 id="limitations">Limitations&lt;/h2>
&lt;p>With the benefits, there&amp;rsquo;s also some drawbacks:&lt;/p>
&lt;h3 id="weather-dependency">Weather dependency&lt;/h3>
&lt;p>You think you&amp;rsquo;re dependent on the weather with a &amp;ldquo;normal&amp;rdquo; bike touring set up? Well, you&amp;rsquo;re even more dependent on the weather with this. For me it resulted in constantly looking at the weather forecast and the battery remaining percentage.&lt;/p>
&lt;p>&lt;strong>First&lt;/strong>, even on perfect weather days, I needed to plan my riding around the sunshine hours, since the solar energy collected during riding is very low. This is due to the fact that even partial shade (from myself, surrounding trees, imperfect panel angle&amp;hellip;) reduces the output of the panels significantly, and in addition, after brief partial shading of the panel, the charge controller takes a while to &amp;ldquo;recover&amp;rdquo; before it produces full charging power again. A more expensive controller (such as Genasun) may be better in this regard, but the limitation of shading is still there.&lt;/p>
&lt;p>Additionally, while riding I only have 200w of solar panels exposed, whereas when stopped, I can unfold 200w more, thus having an even stronger incentive to stop and charge:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038.jpg"
width="4000"
height="3000"
srcset="https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038_hu3413537568579640206.jpg 480w, https://jonas.bike/testing-solar-ebike-charging-on-the-road-how-many-more-kms-can-i-get/MVIMG_20210625_154038_hu14309089876378034623.jpg 1024w"
loading="lazy"
alt="400w of solar charging when stopped"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;strong>Second&lt;/strong>, the need for sunshine means that on cloudy days, there&amp;rsquo;s no power. This thing was heavy and quite a slog to pedal without electric assist.&lt;/p>
&lt;h3 id="power-budgeting-is-essential">Power budgeting is essential&lt;/h3>
&lt;p>To make the most of this, a bit of effort is required to &amp;ldquo;budget&amp;rdquo; and plan for required power consumption in advance. Some stats I figured out about my setup:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Energy use for travel is about 10wh/km, with the trailer and bike fully loaded (the opensource firmware of the TSDZ2 motor can tell me this). With this information, I know that I theoretically have about 100km of no-sun range, which is approximately what I see in reality, too.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Given that energy collection while moving is very low, I know that I will have to stop after approximatly 100km. This resulted in the optimal day for me being:&lt;/p>
&lt;ul>
&lt;li>Start the day (7am) with a 50% full battery, and cycle for about 30kms before breakfast (I&amp;rsquo;d try to have some &amp;ldquo;safety margin&amp;rdquo; power always available).&lt;/li>
&lt;li>Stop to charge (8:30am), while having breakfast and then wait for two hours (unlimited phone charging is great&amp;hellip;). Given that my solar panels are 400w in total, they will give approx 300w in reality (this is normal with solar), this will almost charge my 1000wh battery in about 3h.&lt;/li>
&lt;li>Keep going for a bit (11:30am), adding about 70kms&lt;/li>
&lt;li>Stop for lunch (3pm), and more charging.&lt;/li>
&lt;li>Keep going in the evening&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>A second battery to bring the total capacity up to 2000wh would add more flexibility, and also allow to benefit more from overnight mains charging at campsites or similar.&lt;/p>
&lt;p>Also required is looking at the weather forecast, in particular the daily sunshine hours and times, and planning during the days before.&lt;/p>
&lt;p>I think 400w of solar and 1000wh battery is about the minimum for a solar set-up. For a very approximate idea of how far you can go with your set-up, &lt;a class="link" href="https://endless-sphere.com/forums/viewtopic.php?f=6&amp;amp;t=94721&amp;amp;p=1406135#p1408723" target="_blank" rel="noopener"
>there&amp;rsquo;s a helpful calculator spreadsheet here&lt;/a>.&lt;/p>
&lt;h3 id="day-to-day-limitations">Day to day limitations&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>It&amp;rsquo;s bigger and more cumbersome: meaning that some trails that I would have taken with just the bike now become unavailable. Not just rougher trails, but narrow gates (sheep barriers..), steps, even barriers on cycle paths become annoying.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>No trains with this: on a subsequent trip, there was an offer of all regional train tickets for 1€ in France, so I hopped on and did something completely different than what I&amp;rsquo;d planned. Not possible with this.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="stuff-that-can-go-wrong">Stuff that can go wrong&lt;/h3>
&lt;p>The motor I&amp;rsquo;m using is known for not being particularly reliable, so I ended up taking a whole bag of parts, including a conventional crankset and installation tools to put on the bike in case the motor would fail in a way that left me without being able to pedal &lt;strong>or&lt;/strong> use the electric assist, which is actually a possible failure mode of the TSDZ2. But I didn&amp;rsquo;t need to use it.&lt;/p>
&lt;p>If I were to put further work into something similar, I&amp;rsquo;d probably want to have a more reliable set-up:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>More reliable motor; i.e. Bafang. I&amp;rsquo;ve already had several failures with the TSDZ2 that required disassembly (heavy tools needed), and ordering parts from China (two week wait). It also overheats quite fast on warm days; even when capped at 250w max power it gets too hot. The maximum continuous power it is able to do on a 35c day seems to be about 200w. But to make up for it, it feels really nice to ride, and there is &lt;a class="link" href="https://github.com/OpenSourceEBike/TSDZ2_wiki/wiki" target="_blank" rel="noopener"
>awesome custom firmware&lt;/a> that adds lots of nice features not available on anything else.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Dual motor, or dual-everything setup. It could be possible to add a hub motor to the trailer (a small e-scooter type wheel), plus two (smaller capacity) batteries, and two solar charge controllers. Both drive systems would operate simultaneously (batteries and chargers in paralell, motors maybe too?) With this, all electrical failure modes are covered, and it would be possible to switch over to the functioning drive system with only a minor reduction in performance in case of failure on one.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Secondly, there&amp;rsquo;s just more mechanical stuff to go wrong: trailer, trailer frame, one more wheel for punctures, more load and stress on the bike..&lt;/p>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>For now I&amp;rsquo;m travelling on a conventional bike&amp;hellip;&lt;/p>
&lt;h3 id="future-improvements-or-changes">Future improvements or changes&lt;/h3>
&lt;ul>
&lt;li>More reliable motor set-up, as described above&lt;/li>
&lt;li>On board laptop charging: from China there is a DC to USB-C charger unit, which would allow me to power my laptop from the on board power. 13&amp;quot; MacBook Pro uses about 10w (which would give about 100 hours of runtime off my battery) during web browsing or coding, thus making it possible to have a truly off-grid remote, anywhere work setup.&lt;/li>
&lt;li>Less heavy set-up:, this could come in the form of a conventional ebike without trailer, and instead packing the solar panels on the bike. There are off-the-shelf foldable panels up to 300w, which I think would be just about the minimum. This would give access to trains, rougher trails, and narrow spaces.&lt;/li>
&lt;li>Or a more heavy set-up, with a trike and a &amp;ldquo;solar roof&amp;rdquo; design. The advantage of this is more space to carry stuff, and the ability to just stop and charge without having to unpack solar panels.&lt;/li>
&lt;/ul>
&lt;p>To be continued..&lt;/p></description></item><item><title>Better Cycling Infrastructure Overview in OsmAnd Using GeoVelo Overlay</title><link>https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/</link><pubDate>Thu, 28 Nov 2019 12:59:10 +0100</pubDate><guid>https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/</guid><description>&lt;img src="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot.jpg" alt="Featured image of post Better Cycling Infrastructure Overview in OsmAnd Using GeoVelo Overlay" />&lt;p>&lt;strong>2022 update:&lt;/strong> this still works; however the OsmAnd interface looks slightly different now.&lt;/p>
&lt;p>I’ve recently come across GeoVelo, which offers a map which clearly shows cycling infrastructure even when zoomed out to a country-level overview, which is a great way to have an overview for trip planning, which is’t possible with the offline OsmAnd maps, since cycleways are only shown when zoomed in far enough in OsmAnd. Even with a custom rendering.xml it’s still not possible to get an overview of cycle infrastructure on a country or region level, due to the way the cycleway information is baked into the offline map files. (Side note: GeoVelo also offers their own app - no offline functionality however)&lt;/p>
&lt;p>But - the GeoVelo tiles can be used as an overlay in OsmAnd, to offer an overview, even when zoomed out - it can even be combined with the above mentioned customized rendering.xml for close zoom levels, and the online GeoVelo maps when zoomed out (OsmAnd will cache the tiles for offline use).&lt;/p>
&lt;p>Anyway, here’s what it looks like:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot.jpg"
width="2160"
height="1080"
srcset="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot_hu13093711444304808629.jpg 480w, https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/screenshot_hu17780582800593329107.jpg 1024w"
loading="lazy"
alt="GeoVelo overly add dialog"
class="gallery-image"
data-flex-grow="200"
data-flex-basis="480px"
>&lt;/p>
&lt;p>And, how to set it up:&lt;/p>
&lt;p>In OsmAnd, go to “Configure map”, then “Map source…”, “Define/Edit…”, and enter the following details:&lt;/p>
&lt;ul>
&lt;li>Name: GeoVelo (or anything you want)&lt;/li>
&lt;li>URL: &lt;a class="link" href="https://tiles4.geovelo.fr/raster/facilities/%7b0%7d/%7b1%7d/%7b2%7d.png" target="_blank" rel="noopener"
>https://tiles4.geovelo.fr/raster/facilities/{0}/{1}/{2}.png&lt;/a>&lt;/li>
&lt;li>Maximum zoom: 16&lt;/li>
&lt;li>Minimum zoom: 2&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/geovelo-add.jpg"
width="1080"
height="1356"
srcset="https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/geovelo-add_hu17159429783882686839.jpg 480w, https://jonas.bike/better-cycling-infrastructure-overview-in-osmand-using-geovelo-overlay/geovelo-add_hu9944298300324099158.jpg 1024w"
loading="lazy"
alt="GeoVelo overly add dialog"
class="gallery-image"
data-flex-grow="79"
data-flex-basis="191px"
>&lt;/p>
&lt;p>After that, just enable “Overlay map”, and set it to “GeoVelo”. You might also need to set “map source” back to “Offline vector maps” if OsmAnd changes to only the GeoVelo overlay.&lt;/p>
&lt;p>The map legend is available at GeoVelo, but, tl;dr: the dark green lines are dedicated cycleways, light green ones are shared, road cycle lanes.&lt;/p>
&lt;p>Have fun!&lt;/p></description></item><item><title>Setting up Strava Heatmap in OsmAnd</title><link>https://jonas.bike/setting-up-strava-heatmap-in-osmand/</link><pubDate>Thu, 28 Nov 2019 12:59:10 +0100</pubDate><guid>https://jonas.bike/setting-up-strava-heatmap-in-osmand/</guid><description>&lt;img src="https://jonas.bike/setting-up-strava-heatmap-in-osmand/screenshot.png" alt="Featured image of post Setting up Strava Heatmap in OsmAnd" />&lt;p>&lt;strong>Update 2023:&lt;/strong> while this still works, the OsmAnd interface looks a bit different now, and the &amp;ldquo;easy&amp;rdquo; method does not work consistently at the moment.&lt;/p>
&lt;p>OsmAnd is a great app for hiking, mountain biking, or other outdoorsy things, however, one can make it even better by underlaying (or overlaying) data from Strava’s heatmap in addition to the offline Openstreetmap data. This is quite useful for spotting potential trails or routes that are not in Openstreetmap yet, or for identifying how “good” (poular…) a trail might be, based on how many Strava users take it. Here’s what it looks like:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/setting-up-strava-heatmap-in-osmand/screenshot.png"
width="2160"
height="1080"
srcset="https://jonas.bike/setting-up-strava-heatmap-in-osmand/screenshot_hu3138365701356144955.png 480w, https://jonas.bike/setting-up-strava-heatmap-in-osmand/screenshot_hu4760439698250345742.png 1024w"
loading="lazy"
alt="Strava heatmap as an underaly in Osmand"
class="gallery-image"
data-flex-grow="200"
data-flex-basis="480px"
>&lt;/p>
&lt;h1 id="how-to-set-it-up-the-easy-way">How to set it up, the easy way&lt;/h1>
&lt;p>(Note that this service currently does not work consistently, I&amp;rsquo;ll leave this section here in case it does work again in the future. See below for the alternative.)&lt;/p>
&lt;p>(This uses an online proxy to retrive the map tiles from Strava, so you don’t have to login, fiddle around with session tokens in the URL, etc. yourself) You can find more details about it &lt;a class="link" href="https://anygis.ru/Web/Html/Osmand_en" target="_blank" rel="noopener"
>here, including other maps available&lt;/a>.&lt;/p>
&lt;p>In OsmAnd, go to “Configure map”, then “Map source…”, “Add manually…”, and enter the following details:&lt;/p>
&lt;pre>&lt;code>Name: Strava heatmap (or anything you want)
URL: https://anygis.ru/api/v1/Tracks_Strava_All_HD/{1}/{2}/{0}
Maximum zoom: 15
Minimum zoom: 0
&lt;/code>&lt;/pre>
&lt;p>That’s it. Just enable “underlay map”, and set it to “Strava heatmap”. If it doesn’t work for you, read on:&lt;/p>
&lt;h1 id="and-in-case-the-easy-way-doesnt-work-youll-need-a-strava-account-and-a-desktop-computer">And in case the easy way doesn’t work (you’ll need a Strava account and a desktop computer):&lt;/h1>
&lt;p>First, strava requires you to be logged in for this. Then you need the &amp;ldquo;session tokens&amp;rdquo; to carry over your login to OsmAnd. There&amp;rsquo;s two ways to do this:&lt;/p>
&lt;ol>
&lt;li>The &amp;ldquo;harder&amp;rdquo; way: Go to &lt;a class="link" href="https://www.strava.com/heatmap" target="_blank" rel="noopener"
>https://www.strava.com/heatmap&lt;/a>, login, and then open your browser’s developer tools (hit F12). You’ll need to go to the storage tab (in chrome, that’s under “Application” -&amp;gt; “Cookies”), and copy the values of CloudFront-Signature, CloudFront-Key-Pair-Id and CloudFront-Policy, to make up the following URL: (replace the dots with the values of those cookies…) &lt;code>https://heatmap-external-a.strava.com/tiles-auth/all/gray/{0}/{1}/{2}.png?px=256&amp;amp;Signature=.......&amp;amp;Key-Pair-Id=.......&amp;amp;Policy=.......&lt;/code>&lt;/li>
&lt;li>The &amp;ldquo;Easier&amp;rdquo; way: Use the browser extension: &lt;a class="link" href="https://chrome.google.com/webstore/detail/josm-strava-heatmap/hicmfobjcbinceoeegookkgllpdgkcdc" target="_blank" rel="noopener"
>JOSM Strava Heatmap&lt;/a> to automatically retrieve the URL for you, select the &amp;ldquo;no TMS prefix&amp;rdquo; option when you copy-paste it. On Android, &lt;a class="link" href="https://play.google.com/store/apps/details?id=com.kiwibrowser.browser" target="_blank" rel="noopener"
>Kiwi Browser&lt;/a>, or &lt;a class="link" href="https://play.google.com/store/apps/details?id=org.mozilla.fenix" target="_blank" rel="noopener"
>Firefox nightly&lt;/a> both support extensions, so you can use this on mobile even without a PC.&lt;/li>
&lt;/ol>
&lt;p>Send this to your phone somehow once you’ve got it all.&lt;/p>
&lt;p>In OsmAnd, go to “Configure map”, then “Map source…”, “Add manually…”, and enter the following details:&lt;/p>
&lt;pre>&lt;code>Name: &amp;quot;Strava heatmap&amp;quot; (or anything you want)
URL: the URL you got earlier.
Maximum zoom: 16
&lt;/code>&lt;/pre>
&lt;p>It should look something like this:&lt;/p>
&lt;p>&lt;img src="https://jonas.bike/setting-up-strava-heatmap-in-osmand/Screenshot_OsmAnd_edit.png"
width="1074"
height="1521"
srcset="https://jonas.bike/setting-up-strava-heatmap-in-osmand/Screenshot_OsmAnd_edit_hu17498132122297975041.png 480w, https://jonas.bike/setting-up-strava-heatmap-in-osmand/Screenshot_OsmAnd_edit_hu5869365743617013035.png 1024w"
loading="lazy"
alt="Strava heatmap as an underaly in Osmand"
class="gallery-image"
data-flex-grow="70"
data-flex-basis="169px"
>&lt;/p>
&lt;p>After that, just enable “underlay map”, and set it to “Strava heatmap”. You might also need to set “map source” back to “Offline vector maps” if OsmAnd changes to only the heatmap.&lt;/p>
&lt;p>If it stops working; Strava probably logged you out (usually after about a week), you’ll need to do the whole URL assembly-copy-paste thing again - but instead, you can go to the &amp;ldquo;download maps&amp;rdquo; screen, then &amp;ldquo;Local&amp;rdquo;, and here you can update the entry.&lt;/p>
&lt;p>Have fun!&lt;/p></description></item></channel></rss>